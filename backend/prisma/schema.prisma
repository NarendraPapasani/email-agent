generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Email {
  id         Int             @id @default(autoincrement())
  from       String
  subject    String
  body       String          @db.Text
  recived_at DateTime
  createdAt  DateTime        @default(now())
  analysis   EmailAnalysis?

  @@index([from])
  @@index([recived_at])
}

model EmailAnalysis {
  id            Int      @id @default(autoincrement())
  emailId       Int      @unique
  category      String
  summary       String   @db.Text
  actionItems   Json
  responseDraft String?  @db.Text
  suggestions   Json?
  createdAt     DateTime @default(now())
  email         Email    @relation(fields: [emailId], references: [id], onDelete: Cascade)
}

model Prompt {
  id        Int        @id @default(autoincrement())
  type      PromptType @unique
  content   String     @db.Text
  createdAt DateTime   @default(now())
}

enum PromptType {
  categorization
  action_item
  auto_reply
}